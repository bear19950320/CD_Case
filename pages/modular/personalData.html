<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <title>个人中心修改</title>
    <link href="../../assets/image/logo-min.jpg" rel="icon" type="image/icon">
    <!-- 引用的公用CSS样式 -->
    <link rel="stylesheet" href="../../dist/css/styleAll.css">
    <link rel="stylesheet" href="../../dist/css/index.css">
    <style>
        .form-body {
            background: #fbf8f6;
            padding-top: 15px;
        }

        .form-body>.layui-form .layui-form-item {
            clear: none;
            text-align: center;
        }

        .form-body>.layui-form .layui-form-item .layui-form-label {
            width: 10rem;
        }

        .form-body>.layui-form .layui-form-item .layui-form-label>.required {
            color: crimson;
        }

        .form-btn {
            text-align: center;
        }

        .form-btn .layui-input-inline {
            float: none;
        }
        .form-item-a{
            color:#333333;
        }
        .form-body>.layui-form .layui-form-item .layui-input-inline{
            position: relative;
        }
        /* .form-body>.layui-form .layui-form-item .layui-input-inline  */
        .absolute{
            font-size: 1rem;
            position: absolute;
            top:0.4rem;
            left:0.4rem; 
            color:#999;
        }
        .layui-input[type="password"]{
            padding-left:1.8rem; 
        }
    </style>
</head>

<body class="layui-row scroll" style="overflow-x: hidden;">
    <div class="layui-col-lg12" style="height: 100%;">
        <!-- 身体  -->
        <section class="content automatic" style="width: 100%;">
            <div class="layui-tab">
                <ul class="layui-tab-title">
                    <li class="layui-this">个人基本信息</li>
                    <li>登录密码管理</li>
                    <!-- <li>权限分配</li> -->
                </ul>
                <div class="layui-tab-content">
                    <!-- 个人信息修改 -->
                    <div class="layui-tab-item layui-show form-body automatic">
                        <form class="layui-form layui-row" id="personalForm">
                            <!-- 左边 -->
                            <div class="layui-col-lg6 layui-col-md6 layui-col-sm6 layui-row">
                                <div class="layui-form-item layui-col-lg12 layui-col-md12 layui-col-sm12">
                                    <a href="javascript:;" class="form-item-a">
                                        <label class="layui-form-label">手机号码
                                            <span class="required">*</span>
                                        </label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="phone" required lay-verify="required" placeholder="请输入手机号码" s-title="手机号码" autocomplete="off" class="layui-input form-control">
                                        </div>
                                    </a>
                                </div>
                                <div class="layui-form-item layui-col-lg12 layui-col-md12 layui-col-sm12">
                                    <a href="javascript:;" class="form-item-a">
                                        <label class="layui-form-label">邮箱
                                            <span class="required">*</span>
                                        </label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="email" required lay-verify="required" placeholder="请输入邮箱" s-title="邮箱" autocomplete="off" class="layui-input form-control">
                                        </div>
                                    </a>
                                </div>
                                <div class="layui-form-item layui-col-lg12 layui-col-md12 layui-col-sm12">
                                    <a href="javascript:;" class="form-item-a">
                                        <label class="layui-form-label">个人说明
                                            <span class="required">*</span>
                                        </label>
                                        <div class="layui-input-inline">
                                            <textarea name="ex" placeholder="请输入个人说明" s-title="个人说明" cols="10" rows="5" class="layui-input form-control"></textarea>
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <!-- 右边 -->
                            <div class="layui-col-lg6 layui-col-md6 layui-col-sm6 layui-row">
                                <div class="layui-form-item layui-col-lg12 layui-col-md12 layui-col-sm12">
                                    <a href="javascript:;" class="form-item-a">
                                        <label class="layui-form-label">&nbsp;</label>
                                        <div class="layui-input-inline img-con">
                                            <img src="http://ww3.sinaimg.cn/bmiddle/9d5ef2bbgy1fqomok0vp2j20b40b4jth.jpg" width="100" height="100" alt="">
                                            <span class="layui-btn photo-btn layui-btn-normal" style="margin-top: 0.5rem;" onclick="imgUp(this)">
                                                <i class="iconfont icon-zhaopian"></i> 选择图片</span>
                                            <input type="file" style="display: none;" onchange="fileChange(this)" name="photo" id="headPhoto" placeholder="请输入标题" s-title="照片"
                                                autocomplete="off" class="layui-input">
                                        </div>
                                    </a>
                                </div>
                            </div>

                        </form>
                        <div class="layui-form-item layui-col-lg12 layui-col-md12 layui-col-sm12 form-btn">
                            <div class="layui-input-inline">
                                <button class="layui-btn" name="personalForm" onclick="keep(this)">
                                    <i class="iconfont icon-gou"></i> 保存信息</button>
                            </div>
                        </div>
                    </div>
                    <!-- 登录密码修改 -->
                    <div class="layui-tab-item form-body automatic">
                            <form class="layui-form layui-row" id="passwordForm">
                                <!-- 左边 -->
                                <div class="layui-col-lg6 layui-col-md6 layui-col-sm6 layui-row">
                                    <div class="layui-form-item layui-col-lg12 layui-col-md12 layui-col-sm12">
                                        <a href="javascript:;" class="form-item-a">
                                            <label class="layui-form-label">原密码
                                                <span class="required">*</span>
                                            </label>
                                            <div class="layui-input-inline">
                                                <i class="absolute iconfont icon-suo"></i>
                                                <input type="password" name="oldPassword" required lay-verify="required" placeholder="请输入原密码" s-title="原密码" autocomplete="off" class="layui-input form-control">
                                            </div>
                                        </a>
                                    </div>
                                    <div class="layui-form-item layui-col-lg12 layui-col-md12 layui-col-sm12">
                                        <a href="javascript:;" class="form-item-a">
                                            <label class="layui-form-label">新密码
                                                <span class="required">*</span>
                                            </label>
                                            <div class="layui-input-inline">
                                                <i class="absolute iconfont icon-suo"></i>
                                                <input type="password" name="password" required lay-verify="required" placeholder="请输入新密码" s-title="新密码" autocomplete="off" class="layui-input form-control">
                                            </div>
                                        </a>
                                    </div>
                                    <div class="layui-form-item layui-col-lg12 layui-col-md12 layui-col-sm12">
                                        <a href="javascript:;" class="form-item-a">
                                            <label class="layui-form-label">确认密码
                                                <span class="required">*</span>
                                            </label>
                                            <div class="layui-input-inline">
                                                <i class="absolute iconfont icon-suo"></i>
                                                <input type="password" name="againPassword" required lay-verify="required" placeholder="请输入确认密码" s-title="确认密码" autocomplete="off" class="layui-input form-control">
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <!-- 右边 -->
                                <div class="layui-col-lg6 layui-col-md6 layui-col-sm6 layui-row">
                                   
                                </div>
    
                            </form>
                            <div class="layui-form-item layui-col-lg12 layui-col-md12 layui-col-sm12 form-btn">
                                <div class="layui-input-inline">
                                    <button class="layui-btn" name="passwordForm" onclick="keep(this)">
                                        <i class="iconfont icon-gou"></i> 保存信息</button>
                                </div>
                            </div>
                        </div>
                    <!--<div class="layui-tab-item">内容3</div> -->
                </div>
            </div>
        </section>
    </div>
    <!-- 调用JS的Start -->
    <script src="../../dist/js/index.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
    <!-- 调用JS的End -->
    <script>
        // 让input[type='file']点击
        var imgUp = function (obj) {
            $(obj).next('input[type="file"]').trigger('click');
        }
        // input[type='file']的按钮选择函数
        var fileChange = function (imgFile) {
            var t_files = imgFile.files;
            var str = '';
            imgss = [];
            for (var i = 0, len = t_files.length; i < len; i++) {
                var filextension = t_files[i].name.substring(t_files[i].name.lastIndexOf("."), t_files[i].name.length);
                filextension = filextension.toLowerCase();
                readFile(t_files[i]);
                if ((filextension != '.jpg') && (filextension != '.gif') && (filextension != '.jpeg') && (filextension != '.png') && (filextension != '.bmp')) {
                    layer.msg("对不起，系统仅支持标准格式的照片，请您调整格式后重新上传，谢谢 !");
                    imgFile.focus();
                } else {
                    var path;
                    if (document.all) {
                        imgFile.select();
                        path = document.selection.createRange().text;
                        document.getElementById("img").innerHTML = "";
                        document.getElementById("img").style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='scale',src=\"" + path + "\")"; //使用滤镜效果
                    } else {
                        path = window.URL.createObjectURL(imgFile.files[i]);
                    }
                    // 自己的大的img-con父亲dom下面的路径赋值;
                    $(imgFile).parents('.img-con').find('img').attr('src', path)
                }
            }
        }
        // 保存函数()
        var keep = function (obj) {
            var $contorl = $("#" + $(obj).attr('name')).find('.form-control');
            var $contorlLength = $("#" + $(obj).attr('name')).find('.form-control').length;
            console.log($contorl)
            //  循环判断所有的必填项是否填写！
            for (var i = 0; maxLength = $contorlLength, i < maxLength; i++) {
                if (!$contorl[i].value) {
                    layer.tips('请填写' + $($contorl).eq(i).attr('s-title'), $($contorl).eq(i));
                    return false;
                }
            }

            // 当所有必填选项的Val填写后进行提交
            var formData = new FormData(document.getElementById($(obj).attr('name')));
            $.ajax({
                url: '/extention/teacherInfoManager/getTime',
                type: 'POST',
                data: formData,
                dataType: "JSON",
                processData: false,
                contentType: false,
                success: function (data) {

                },
                error: function () {

                }
            });
        }
    </script>
</body>

</html>